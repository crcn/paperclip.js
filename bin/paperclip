#!/usr/bin/env node
var argv = require('optimist').
usage('Usage: $0 -i [paperclip_template_file] -o [js_file]').
demand(['i']).
alias('i', 'input').
alias('w', 'watch').
describe('p', 'pretty-print template output').
describe('i', 'paperclip template source').
argv,
path = require("path"),
parser = require("../lib/parser"),
parser = require("../lib/parser2"),
formatter = require("../lib/parser/formatter"),
fs = require("fs");

try {
  var source = fs.readFileSync(argv.i, "utf8"),
  script = parser.parse(source);

  if (argv.p) {
    script = formatter.format(script);
  } 
} catch (e) {
  console.log(e.stack);
}


console.log(script)