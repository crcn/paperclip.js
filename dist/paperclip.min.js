!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){var i=t("nofactor"),r=t("./defaults"),s=t("./template"),o=t("./parser");s.parser=o;var a=e.exports={accessors:r.accessors,runloop:r.runloop,document:i,Component:t("./components/base"),Attribute:t("./attributes/script"),template:s,components:r.components,attributes:r.attributes,modifiers:r.modifiers,parse:o.parse};"undefined"!=typeof window&&(window.paperclip=a,window.paperclip.noConflict=function(){return delete window.paperclip,a})},{"./attributes/script":15,"./components/base":18,"./defaults":24,"./parser":46,"./template":53,nofactor:80}],2:[function(t,e,n){function i(){}var r=t("protoclass");e.exports=r(i,{__isScope:!0})},{protoclass:81}],3:[function(t,e,n){function i(){r.call(this),this._getters={},this._callers={},this._watchers=[]}var r=t("./base"),s=t("../utils/set");e.exports=r.extend(i,{castObject:function(t){return t},call:function(t,e,n){var i;if(!(i=this._callers[e])){var r=["this"].concat(e.split("."));r.pop(),r=r.join("."),i=this._callers[e]=new Function("params","return this."+e+".apply("+r+", params);")}try{var s=i.call(t,n);return this.applyChanges(),s}catch(o){return void 0}},get:function(t,e){var n,i="string"!=typeof e?e.join("."):e;(n=this._getters[i])||(n=this._getters[i]=new Function("return this."+i));try{return n.call(t)}catch(r){return void 0}},set:function(t,e,n){"string"==typeof e&&(e=e.split("."));var i=s(t,e,n);return this.applyChanges(),i},watchProperty:function(t,e,n){var i,r=this,s=!0;return this._addWatcher(function(){var o=r.get(t,e);if(s||o!==i||"function"==typeof o){s=!1;i=o,n(o,i)}})},_addWatcher:function(t){var e=this,n={apply:t,trigger:t,dispose:function(){var t=e._watchers.indexOf(n);~t&&e._watchers.splice(t,1)}};return this._watchers.push(n),n},watchEvent:function(t,e,n){return"[object Array]"===Object.prototype.toString.call(t)&&"change"===e?this._watchArrayChangeEvent(t,n):{dispose:function(){}}},_watchArrayChangeEvent:function(t,e){var n=t.concat();return this._addWatcher(function(){var i=t.length!==n.length;if(!i)for(var r=0,s=n.length;s>r&&!(i=n[r]!==t[r]);r++);i&&(n=t.concat(),e())})},normalizeCollection:function(t){return t},normalizeObject:function(t){return t},apply:function(){this.applyChanges()},applyChanges:function(){for(var t=0,e=this._watchers.length;e>t;t++)this._watchers[t].apply()}})},{"../utils/set":73,"./base":2}],4:[function(t,e,n){function i(t){this.view=t.view,this.node=t.node,this.section=t.section,this.key=t.key,this.value=t.value,this.document=this.view.template.document,this.initialize()}var r=t("protoclass");e.exports=r(i,{initialize:function(){},bind:function(){},unbind:function(){}})},{protoclass:81}],5:[function(t,e,n){var i=t("./script");e.exports=i.extend({update:function(){var t=this.currentValue;if("string"==typeof t)return this.node.setAttribute("class",t);if(!t)return this.node.removeAttribute("class");var e=this.node.getAttribute("class");e=e?e.split(" "):[];for(var n in t)for(var i=t[n],r=n.split(/[,\s]+/g),s=0,o=r.length;o>s;s++){var a=r[s],u=e.indexOf(a);i?~u||e.push(a):~u&&e.splice(u,1)}this.node.setAttribute("class",e.join(" "))}}),e.exports.test=function(t){return"object"==typeof t&&!t.buffered}},{"./script":15}],6:[function(t,e,n){var i=t("./keyCodedEvent");e.exports=i.extend({keyCodes:[8]})},{"./keyCodedEvent":14}],7:[function(t,e,n){var i=t("./base");e.exports=i.extend({initialize:function(){this.view.transitions.push(this)},enter:function(){var t=this.value;(t=t.evaluate(this.view))(this.node,function(){})}})},{"./base":4}],8:[function(t,e,n){var i=t("./base");e.exports=i.extend({initialize:function(){this.view.transitions.push(this)},exit:function(t){var e=this.value;(e=e.evaluate(this.view))(this.node,t)}})},{"./base":4}],9:[function(t,e,n){var i=t("./script");e.exports=i.extend({update:function(){this.currentValue?this.node.removeAttribute("disabled"):this.node.setAttribute("disabled","disabled")}})},{"./script":15}],10:[function(t,e,n){var i=t("./keyCodedEvent");e.exports=i.extend({keyCodes:[13]})},{"./keyCodedEvent":14}],11:[function(t,e,n){var i=t("./keyCodedEvent");e.exports=i.extend({keyCodes:[27]})},{"./keyCodedEvent":14}],12:[function(t,e,n){function i(t){this._onEvent=r(this._onEvent,this),s.call(this,t)}var r=(t("protoclass"),t("../utils/bind")),s=t("./base");s.extend(i,{initialize:function(){var t=this.event||(this.event=this.key.toLowerCase().replace(/^on/,""));this.node.addEventListener(t,this._onEvent)},bind:function(){s.prototype.bind.call(this),this.bound=!0},_onEvent:function(t){this.bound&&(t.preventDefault(),this.view.set("event",t),this.value.evaluate(this.view))},unbind:function(){this.bound=!1}}),e.exports=i},{"../utils/bind":70,"./base":4,protoclass:81}],13:[function(t,e,n){(function(n){var i=t("./script");e.exports=i.extend({update:function(){if(this.currentValue&&this.node.focus){var t=this;if(!n.browser)return this.node.focus();setTimeout(function(){t.node.focus()},1)}}})}).call(this,t("_process"))},{"./script":15,_process:76}],14:[function(t,e,n){var i=t("./event");e.exports=i.extend({event:"keydown",keyCodes:[],_onEvent:function(t){~this.keyCodes.indexOf(t.keyCode)&&i.prototype._onEvent.apply(this,arguments)}})},{"./event":12}],15:[function(t,e,n){var i=t("./base");e.exports=i.extend({bind:function(){i.prototype.bind.call(this);var t=this;this.value.watch&&(this._binding=this.value.watch(this.view,function(e){e!==t.currentValue&&(t.currentValue=e,t.view.runloop.deferOnce(t))}),this.currentValue=this.value.evaluate(this.view)),null!=this.currentValue&&this.update()},update:function(){},unbind:function(){this._binding&&this._binding.dispose()}})},{"./base":4}],16:[function(t,e,n){var i=t("./script");e.exports=i.extend({bind:function(){this._currentStyles={},i.prototype.bind.call(this)},update:function(){var t=this.currentValue,e={};for(var n in t){var i=t[n];i!==this._currentStyles[n]&&(e[n]=this._currentStyles[n]=i||"")}if(this.node.__isNode)this.node.style.setProperties(e);else for(var r in e)this.node.style[r]=e[r]}}),e.exports.test=function(t){return"object"==typeof t&&!t.buffered}},{"./script":15}],17:[function(t,e,n){(function(n){function i(t){this._onInput=s(this._onInput,this),r.call(this,t)}var r=t("./script"),s=t("../utils/bind");r.extend(i,{_events:["change","keyup","input"],initialize:function(){var t=this;this._events.forEach(function(e){t.node.addEventListener(e,t._onInput)})},bind:function(){r.prototype.bind.call(this);var t=this;/^(text|password|email)$/.test(this.node.getAttribute("type"))&&(this._autocompleteCheckInterval=setInterval(function(){t._onInput()},n.browser?500:10))},unbind:function(){r.prototype.unbind.call(this),clearInterval(this._autocompleteCheckInterval)},update:function(){var t=this.model=this.currentValue;if(this._modelBindings&&this._modelBindings.dispose(),!t||!t.__isReference)throw new Error("input value must be a reference. Make sure you have <~> defined");var e=this;t.gettable&&(this._modelBindings=this.view.watch(t.path,function(t){e._elementValue(e._parseValue(t))}),this._modelBindings.trigger())},_parseValue:function(t){return null==t||""===t?void 0:t},_onInput:function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());this.model&&String(this.model.value())!=String(e)&&this.model.value(e)},_elementValue:function(t){var e=/checkbox/.test(this.node.type),n=/radio/.test(this.node.type),i=e||n,r=Object.prototype.hasOwnProperty.call(this.node,"value"),s=r||/input|textarea|checkbox/.test(this.node.nodeName.toLowerCase());return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?n?String(t)===String(this.node.value)&&(this.node.checked=!0):this.node.checked=t:String(t)!==this._elementValue()&&(s?this.node.value=t:this.node.innerHTML=t))):e?Boolean(this.node.checked):s?this.node.value||"":this.node.innerHTML||""}}),i.test=function(t){return"object"==typeof t&&!t.buffered},e.exports=i}).call(this,t("_process"))},{"../utils/bind":70,"./script":15,_process:76}],18:[function(t,e,n){function i(t){this.attributes=t.attributes,this.childTemplate=t.childTemplate,this.view=t.view,this.section=t.section,this.document=this.view.template.document,this.didChange=s(this.didChange,this),this.initialize()}var r=t("protoclass"),s=t("../utils/bind");e.exports=r(i,{initialize:function(){},bind:function(){this.update()},didChange:function(){this.view.runloop.deferOnce(this)},unbind:function(){this._changeListener&&this._changeListener.dispose()},update:function(){}})},{"../utils/bind":70,protoclass:81}],19:[function(t,e,n){function i(t,e){if("[object Array]"===Object.prototype.toString.call(t))for(var n=0,i=t.length;i>n;n++)e(t[n],n);else for(var r in t)e(t[r],r)}var r=t("./base");e.exports=r.extend({update:function(){this._updateListener&&this._updateListener.dispose();var t=this.attributes.as,e=this.attributes.key||"index",n=this.attributes.each,r=this.view.accessor;n||(n=[]),this._updateListener=r.watchEvent(n,"change",function(){o.view.runloop.deferOnce(o)}),n=r.normalizeCollection(n),this._children||(this._children=[]);var s,o=this,a=0;i(n,function(n,i){if(t?(s={},s[e]=i,s[t]=n):s=n,i<o._children.length){var r=o._children[i];(r.context===n||r.context[t]!==n)&&r.bind(s)}else{var u=o.childTemplate.view(s,{parent:o.view});o._children.push(u),o.section.appendChild(u.render())}a++}),this._children.splice(a).forEach(function(t){t.dispose()})}})},{"./base":18}],20:[function(t,e,n){function i(t){r.call(this,t)}var r=t("./base");e.exports=r.extend(i,{update:function(){var t=!!this.attributes.when;this._show!==t&&(this._show=t,t?(this._view=this.childTemplate.view(this.view.context),this.section.appendChild(this._view.render())):(this._view&&this._view.dispose(),this._view=void 0))}})},{"./base":18}],21:[function(t,e,n){function i(t){r.call(this,t);var e=this;this.childTemplates=this.childTemplate.vnode.children.map(function(t){return e.childTemplate.child(t)})}var r=t("./base");e.exports=r.extend(i,{update:function(){var t,e=this.attributes.state;if("number"==typeof e)t=this.childTemplates[e];else for(var n=this.childTemplates.length;n--;){var i=this.childTemplates[n];if(i.vnode.attributes.name===e){t=i;break}}this.currentTemplate!==t&&(this.currentTemplate=t,this.currentView&&this.currentView.dispose(),t&&(this.currentView=t.view(this.view.context,{parent:this.view}),this.currentTemplate=t,this.section.appendChild(this.currentView.render())))}})},{"./base":18}],22:[function(t,e,n){function i(t){r.call(this,t);var e=this;this.childTemplates=this.childTemplate.vnode.children.map(function(t){return e.childTemplate.child(t)})}var r=t("./base"),s=t("../utils/bind");e.exports=r.extend(i,{bind:function(){r.prototype.bind.call(this),this.bindings=[];for(var t=(s(this.update,this),0),e=this.childTemplates.length;e>t;t++){var n=this.childTemplates[t].vnode.attributes.when;n&&this.bindings.push(n.watch(this.view,this.didChange))}},unbind:function(){for(var t=this.bindings.length;t--;)this.bindings[t].dispose()},update:function(){for(var t,e=0,n=this.childTemplates.length;n>e;e++){t=this.childTemplates[e];var i=t.vnode.attributes.when;if(!i||i.evaluate(this.view))break}if(this.currentChild==t)return void(this._view&&this._view.context!==this.context&&this._view.bind(this.view.context));if(this._view&&this._view.dispose(),e!=n){this.currentChild=t;var r=t.child(t.vnode.children,{accessor:this.view.accessor});this._view=r.view(this.view.context),this.section.appendChild(this._view.render())}}})},{"../utils/bind":70,"./base":18}],23:[function(t,e,n){(function(n){function i(t){r.call(this,t)}var r=t("./base");e.exports=r.extend(i,{update:function(){var t=this.attributes.html;if("object"==typeof t&&t.evaluate&&(t=void 0),this.currentValue&&this.currentValue.remove&&this.currentValue.remove(),this.currentValue=t,!t)return this.section.removeAll();var e;if(t.render)t.remove(),e=t.render();else if(null!=t.nodeType)e=t;else if(this.document!==n.document)e=this.document.createTextNode(String(t));else{var i=this.document.createElement("div");i.innerHTML=String(t),e=this.document.createDocumentFragment();for(var r=Array.prototype.slice.call(i.childNodes),s=0,o=r.length;o>s;s++)e.appendChild(r[s])}this.section.replaceChildNodes(e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":18}],24:[function(t,e,n){(function(n){var i=t("./runloop"),r=t("./accessors/pojo");e.exports={accessorClass:r,accessors:{pojo:t("./accessors/pojo")},components:{repeat:t("./components/repeat"),stack:t("./components/stack"),"switch":t("./components/switch"),show:t("./components/show"),unsafe:t("./components/unsafe")},attributes:{value:t("./attributes/value"),checked:t("./attributes/value"),enable:t("./attributes/enable"),focus:t("./attributes/focus"),style:t("./attributes/style"),"class":t("./attributes/class"),easein:t("./attributes/easeIn"),easeout:t("./attributes/easeOut"),onclick:t("./attributes/event"),ondoubleclick:t("./attributes/event"),onfocus:t("./attributes/event"),onload:t("./attributes/event"),onsubmit:t("./attributes/event"),onmousedown:t("./attributes/event"),onchange:t("./attributes/event"),onmouseup:t("./attributes/event"),onmouseover:t("./attributes/event"),onmouseout:t("./attributes/event"),onfocusin:t("./attributes/event"),onfocusout:t("./attributes/event"),onmousemove:t("./attributes/event"),onkeydown:t("./attributes/event"),onkeyup:t("./attributes/event"),onenter:t("./attributes/enter"),ondelete:t("./attributes/delete"),onescape:t("./attributes/escape")},runloop:new i({tick:n.env.PC_DEBUG?n.nextTick:(n.env.browser,void 0)}),modifiers:{uppercase:function(t){return String(t).toUpperCase()},lowercase:function(t){return String(t).toLowerCase()},titlecase:function(t){var e;return e=String(t),e.substr(0,1).toUpperCase()+e.substr(1)},json:function(t,e,n){return JSON.stringify.apply(JSON,arguments)},isNaN:function(t){return isNaN(t)},round:Math.round}}}).call(this,t("_process"))},{"./accessors/pojo":3,"./attributes/class":5,"./attributes/delete":6,"./attributes/easeIn":7,"./attributes/easeOut":8,"./attributes/enable":9,"./attributes/enter":10,"./attributes/escape":11,"./attributes/event":12,"./attributes/focus":13,"./attributes/style":16,"./attributes/value":17,"./components/repeat":19,"./components/show":20,"./components/stack":21,"./components/switch":22,"./components/unsafe":23,"./runloop":48,_process:76}],25:[function(t,e,n){function i(t){this.expressions=t||new s,r.apply(this,arguments)}var r=t("./base"),s=t("./parameters");r.extend(i,{type:"array",toJavaScript:function(){return"["+this.expressions.toJavaScript()+"]"}}),e.exports=i},{"./base":27,"./parameters":39}],26:[function(t,e,n){function i(t,e){r.apply(this,arguments),this.reference=t,this.value=e}var r=t("./base");r.extend(i,{type:"assignment",toJavaScript:function(){var t=this.reference.path.join(".");return"this.set('"+t+"', "+this.value.toJavaScript()+")"}}),e.exports=i},{"./base":27}],27:[function(t,e,n){function i(){this._children=[],this._addChildren(Array.prototype.slice.call(arguments,0))}var r=t("protoclass");r(i,{__isExpression:!0,_addChildren:function(t){for(var e=t.length;e--;){var n=t[e];if(n)if(n.__isExpression)this._children.push(n);else if("object"==typeof n)for(var i in n)this._addChildren([n[i]])}},filterAllChildren:function(t){var e=[];return this.traverseChildren(function(n){t(n)&&e.push(n)}),e},traverseChildren:function(t){t(this);for(var e=this._children.length;e--;){var n=this._children[e];n.traverseChildren(t)}}}),e.exports=i},{protoclass:81}],28:[function(t,e,n){function i(t,e,n){this.scripts=t,this.contentTemplate=e,this.childBlock=n,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"blockBinding",toJavaScript:function(){var t="block("+this.scripts.value.value.toJavaScript()+", ";return t+=this.contentTemplate?this.contentTemplate.toJavaScript():"void 0",this.childBlock&&(t+=", "+this.childBlock.toJavaScript()),t+")"}}),e.exports=i},{"./base":27}],29:[function(t,e,n){function i(t,e){this.reference=t,this.parameters=e,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"call",toJavaScript:function(){var t=this.reference.path.concat(),e="this.call(";return e+="'"+t.join(".")+"'",e+=", ["+this.parameters.toJavaScript()+"]",e+")"}}),e.exports=i},{"./base":27}],30:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"commentNode",toJavaScript:function(){return'comment("'+this.value.replace(/["]/g,'\\"')+'")'}}),e.exports=i},{"./base":27}],31:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"doctype",toJavaScript:function(){return"text('<!DOCTYPE "+this.value+">')"}}),e.exports=i},{"./base":27}],32:[function(t,e,n){function i(t,e,n){this.name=t,this.attributes=e,this.childNodes=n||new s,r.apply(this,arguments)}var r=t("./base"),s=t("./array");r.extend(i,{type:"elementNode",toJavaScript:function(){return'element("'+this.name+'", '+this.attributes.toJavaScript()+", "+this.childNodes.toJavaScript()+")"}}),e.exports=i},{"./array":25,"./base":27}],33:[function(t,e,n){function i(t){this.expression=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"call",toJavaScript:function(){return"("+this.expression.toJavaScript()+")"}}),e.exports=i},{"./base":27}],34:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"hash",toJavaScript:function(){var t=[];for(var e in this.value){var n=this.value[e];t.push("'"+e+"':"+n.toJavaScript())}return"{"+t.join(", ")+"}"}}),e.exports=i},{"./base":27}],35:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"literal",toJavaScript:function(){return String(this.value)}}),e.exports=i},{"./base":27}],36:[function(t,e,n){function i(t,e){this.name=t,this.parameters=e,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"modifier",toJavaScript:function(){var t="modifiers."+this.name+".call(this",e=this.parameters.toJavaScript();return e.length&&(t+=", "+e),t+")"}}),e.exports=i},{"./base":27}],37:[function(t,e,n){function i(t,e){this.operator=t,this.expression=e,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"!",toJavaScript:function(){return this.operator+this.expression.toJavaScript()}}),e.exports=i},{"./base":27}],38:[function(t,e,n){function i(t,e,n){this.operator=t,this.left=e,this.right=n,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"operator",toJavaScript:function(){return this.left.toJavaScript()+this.operator+this.right.toJavaScript()}}),e.exports=i},{"./base":27}],39:[function(t,e,n){function i(t){this.expressions=t||[],r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"parameters",toJavaScript:function(){return this.expressions.map(function(t){return t.toJavaScript()}).join(", ")}}),e.exports=i},{"./base":27}],40:[function(t,e,n){function i(t,e){this.path=t,this.bindingType=e,this.fast="^"===e,this.unbound=-1!==["~","~>"].indexOf(e),this._isBoundTo=~["<~","<~>","~>"].indexOf(this.bindingType),r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"reference",toJavaScript:function(){if(!this._isBoundTo&&this.fast)return"this.context."+this.path.join(".");var t=this.path.join(".");return this._isBoundTo?"this.reference('"+t+"', "+("<~"!==this.bindingType)+", "+("~>"!==this.bindingType)+")":"this.get('"+t+"')"}}),e.exports=i},{"./base":27}],41:[function(t,e,n){function i(t){this.childNodes=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"rootNode",toJavaScript:function(){var t,e="(function(fragment, block, element, text, comment, parser, modifiers) { ";if("array"===this.childNodes.type)if(this.childNodes.expressions.expressions.length>1)t="fragment("+this.childNodes.toJavaScript()+")";else{if(!this.childNodes.expressions.expressions.length)return e+"})";t=this.childNodes.expressions.expressions[0].toJavaScript()}else t=this.childNodes.toJavaScript();return e+"return "+t+"; })"}}),e.exports=i},{"./base":27}],42:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base"),s=t("../../utils/uniq");r.extend(i,{type:"script",toJavaScript:function(){var t=this.filterAllChildren(function(t){return"reference"===t.type}).filter(function(t){return!t.unbound&&t.path}).map(function(t){return t.path});t=s(t.map(function(t){return t.join(".")}));var e="{";return e+="run: function() { return "+this.value.toJavaScript()+"; }",e+=", refs: "+JSON.stringify(t),e+"}"}}),e.exports=i},{"../../utils/uniq":75,"./base":27}],43:[function(t,e,n){function i(t){this.value=t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"string",toJavaScript:function(){return'"'+this.value.replace(/"/g,'\\"')+'"'}}),e.exports=i},{"./base":27}],44:[function(t,e,n){function i(t,e,n){this.condition=t,this.tExpression=e,this.fExpression=n,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"ternaryCondition",toJavaScript:function(){return this.condition.toJavaScript()+"?"+this.tExpression.toJavaScript()+":"+this.fExpression.toJavaScript()}}),e.exports=i},{"./base":27}],45:[function(t,e,n){(function(n){function i(t){if(n.paperclip&&n.paperclip.he)this.value=n.paperclip.he.decode(t);else if("undefined"!=typeof window){var e=document.createElement("div");e.innerHTML=t,this.value=e.textContent}else this.value=t;this.decoded=this.value!==t,r.apply(this,arguments)}var r=t("./base");r.extend(i,{type:"textNode",toJavaScript:function(){return'text("'+this.value.replace(/["]/g,'\\"')+'")'}}),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":27}],46:[function(t,e,n){(function(n){var i,r=t("./parser"),s={};e.exports={parse:i=function(t){return'"use strict";module.exports = '+r.parse(t).toJavaScript()},compile:function(t){var e;if(s[t])return s[t];e||(e=t);var n='"use strict";return '+r.parse(e).toJavaScript();return s[t]=new Function(n)()}},n.paperclip&&(n.paperclip.parse=e.exports.parse,n.paperclip.template.parser=e.exports)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./parser":47}],47:[function(t,e,n){e.exports=function(){function e(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function n(t,e,n,i,r,s){this.message=t,this.expected=e,this.found=n,this.offset=i,this.line=r,this.column=s,this.name="SyntaxError"}function i(e){function i(){return e.substring(Er,Tr)}function r(t){throw a(null,[{type:"other",description:t}],Er)}function s(t){function n(t,n,i){var r,s;for(r=n;i>r;r++)s=e.charAt(r),"\n"===s?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Jr!==t&&(Jr>t&&(Jr=0,Vr={line:1,column:1,seenCR:!1}),n(Vr,Jr,t),Jr=t),Vr}function o(t){jr>Tr||(Tr>jr&&(jr=Tr,Or=[]),Or.push(t))}function a(t,i,r){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var i,r,s,o=new Array(t.length);for(s=0;s<t.length;s++)o[s]=t[s].description;return i=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],r=e?'"'+n(e)+'"':"end of input","Expected "+i+" but "+r+" found."}var u=s(r),c=r<e.length?e.charAt(r):null;return null!==i&&o(i),new n(null!==t?t:a(i,c),i,c,r,u.line,u.column)}function u(){var t;return t=c()}function c(){var t,e;return t=Tr,e=l(),e!==gt&&(Er=t,e=xt(e)),t=e}function h(){var t,n,i,r,s,a;if(t=Tr,e.substr(Tr,9)===Ct?(n=Ct,Tr+=9):(n=gt,0===Fr&&o(At)),n!==gt)if(i=lt(),i!==gt){if(r=[],Nt.test(e.charAt(Tr))?(s=e.charAt(Tr),Tr++):(s=gt,0===Fr&&o(St)),s!==gt)for(;s!==gt;)r.push(s),Nt.test(e.charAt(Tr))?(s=e.charAt(Tr),Tr++):(s=gt,0===Fr&&o(St));else r=_t;r!==gt?(s=lt(),s!==gt?(62===e.charCodeAt(Tr)?(a=kt,Tr++):(a=gt,0===Fr&&o(Tt)),a!==gt?(Er=t,n=Et(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;else Tr=t,t=_t;return t}function l(){var t,e,n;for(t=Tr,e=[],n=d(),n===gt&&(n=v(),n===gt&&(n=p(),n===gt&&(n=b(),n===gt&&(n=S()))));n!==gt;)e.push(n),n=d(),n===gt&&(n=v(),n===gt&&(n=p(),n===gt&&(n=b(),n===gt&&(n=S()))));return e!==gt&&(Er=t,e=Jt(e)),t=e}function p(){var t,n,i,r,s,a,u;if(t=Tr,n=lt(),n!==gt)if(e.substr(Tr,4)===Vt?(i=Vt,Tr+=4):(i=gt,0===Fr&&o(jt)),i!==gt){if(r=[],s=Tr,a=Tr,Fr++,e.substr(Tr,3)===Ft?(u=Ft,Tr+=3):(u=gt,0===Fr&&o(Pt)),Fr--,u===gt?a=Ot:(Tr=a,a=_t),a!==gt?(u=ht(),u!==gt?(Er=s,a=zt(u),s=a):(Tr=s,s=_t)):(Tr=s,s=_t),s!==gt)for(;s!==gt;)r.push(s),s=Tr,a=Tr,Fr++,e.substr(Tr,3)===Ft?(u=Ft,Tr+=3):(u=gt,0===Fr&&o(Pt)),Fr--,u===gt?a=Ot:(Tr=a,a=_t),a!==gt?(u=ht(),u!==gt?(Er=s,a=zt(u),s=a):(Tr=s,s=_t)):(Tr=s,s=_t);else r=_t;r!==gt?(e.substr(Tr,3)===Ft?(s=Ft,Tr+=3):(s=gt,0===Fr&&o(Pt)),s!==gt?(a=lt(),a!==gt?(Er=t,n=Lt(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;else Tr=t,t=_t;return t===gt&&(t=h()),t}function d(){var t,n,i,r,s,a,u;return t=Tr,60===e.charCodeAt(Tr)?(n=Bt,Tr++):(n=gt,0===Fr&&o(It)),n!==gt?(e.substr(Tr,4)===Mt?(i=Mt,Tr+=4):(i=gt,0===Fr&&o(Rt)),i===gt&&(e.substr(Tr,4)===qt?(i=qt,Tr+=4):(i=gt,0===Fr&&o(Ht)),i===gt&&(e.substr(Tr,2)===Dt?(i=Dt,Tr+=2):(i=gt,0===Fr&&o(Ut)),i===gt&&(e.substr(Tr,3)===$t?(i=$t,Tr+=3):(i=gt,0===Fr&&o(Zt)),i===gt&&(e.substr(Tr,7)===Qt?(i=Qt,Tr+=7):(i=gt,0===Fr&&o(Yt)),i===gt&&(e.substr(Tr,5)===Wt?(i=Wt,Tr+=5):(i=gt,0===Fr&&o(Gt)),i===gt&&(e.substr(Tr,2)===Kt?(i=Kt,Tr+=2):(i=gt,0===Fr&&o(Xt)),i===gt&&(e.substr(Tr,3)===te?(i=te,Tr+=3):(i=gt,0===Fr&&o(ee)),i===gt&&(e.substr(Tr,5)===ne?(i=ne,Tr+=5):(i=gt,0===Fr&&o(ie)),i===gt&&(e.substr(Tr,6)===re?(i=re,Tr+=6):(i=gt,0===Fr&&o(se)),i===gt&&(e.substr(Tr,4)===oe?(i=oe,Tr+=4):(i=gt,0===Fr&&o(ae)),i===gt&&(e.substr(Tr,4)===ue?(i=ue,Tr+=4):(i=gt,0===Fr&&o(ce)),i===gt&&(e.substr(Tr,5)===he?(i=he,Tr+=5):(i=gt,0===Fr&&o(le)),i===gt&&(e.substr(Tr,6)===pe?(i=pe,Tr+=6):(i=gt,0===Fr&&o(de)),i===gt&&(e.substr(Tr,5)===fe?(i=fe,Tr+=5):(i=gt,0===Fr&&o(ve)),i===gt&&(e.substr(Tr,3)===be?(i=be,Tr+=3):(i=gt,0===Fr&&o(me))))))))))))))))),i!==gt?(r=x(),r!==gt?(62===e.charCodeAt(Tr)?(s=kt,Tr++):(s=gt,0===Fr&&o(Tt)),s===gt&&(e.substr(Tr,2)===ye?(s=ye,Tr+=2):(s=gt,0===Fr&&o(we))),s===gt&&(s=ge),s!==gt?(a=lt(),a!==gt?(u=f(),u===gt&&(u=ge),u!==gt?(Er=t,n=xe(i,r,u),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function f(){var t,n,i,r;return t=Tr,e.substr(Tr,2)===_e?(n=_e,Tr+=2):(n=gt,0===Fr&&o(Ce)),n!==gt?(e.substr(Tr,4)===Mt?(i=Mt,Tr+=4):(i=gt,0===Fr&&o(Rt)),i===gt&&(e.substr(Tr,4)===qt?(i=qt,Tr+=4):(i=gt,0===Fr&&o(Ht)),i===gt&&(e.substr(Tr,2)===Dt?(i=Dt,Tr+=2):(i=gt,0===Fr&&o(Ut)),i===gt&&(e.substr(Tr,3)===$t?(i=$t,Tr+=3):(i=gt,0===Fr&&o(Zt)),i===gt&&(e.substr(Tr,7)===Qt?(i=Qt,Tr+=7):(i=gt,0===Fr&&o(Yt)),i===gt&&(e.substr(Tr,5)===Wt?(i=Wt,Tr+=5):(i=gt,0===Fr&&o(Gt)),i===gt&&(e.substr(Tr,2)===Kt?(i=Kt,Tr+=2):(i=gt,0===Fr&&o(Xt)),i===gt&&(e.substr(Tr,3)===te?(i=te,Tr+=3):(i=gt,0===Fr&&o(ee)),i===gt&&(e.substr(Tr,5)===ne?(i=ne,Tr+=5):(i=gt,0===Fr&&o(ie)),i===gt&&(e.substr(Tr,6)===re?(i=re,Tr+=6):(i=gt,0===Fr&&o(se)),i===gt&&(e.substr(Tr,4)===oe?(i=oe,Tr+=4):(i=gt,0===Fr&&o(ae)),i===gt&&(e.substr(Tr,4)===ue?(i=ue,Tr+=4):(i=gt,0===Fr&&o(ce)),i===gt&&(e.substr(Tr,5)===he?(i=he,Tr+=5):(i=gt,0===Fr&&o(le)),i===gt&&(e.substr(Tr,6)===pe?(i=pe,Tr+=6):(i=gt,0===Fr&&o(de)),i===gt&&(e.substr(Tr,5)===fe?(i=fe,Tr+=5):(i=gt,0===Fr&&o(ve)),i===gt&&(e.substr(Tr,3)===be?(i=be,Tr+=3):(i=gt,0===Fr&&o(me))))))))))))))))),i!==gt?(62===e.charCodeAt(Tr)?(r=kt,Tr++):(r=gt,0===Fr&&o(Tt)),r!==gt?(Er=t,n=Ae(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function v(){var t,e,n,i;return t=Tr,e=g(),e!==gt?(n=l(),n!==gt?(i=_(),i!==gt?(Er=t,e=Ne(e,n,i),t=e):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=y()),t}function b(){var t,e,n;if(t=Tr,e=[],n=m(),n!==gt)for(;n!==gt;)e.push(n),n=m();else e=_t;return e!==gt&&(Er=t,e=Se(e)),t=e}function m(){var t,n,i;return t=Tr,n=Tr,Fr++,60===e.charCodeAt(Tr)?(i=Bt,Tr++):(i=gt,0===Fr&&o(It)),i===gt&&(e.substr(Tr,2)===ke?(i=ke,Tr+=2):(i=gt,0===Fr&&o(Te))),Fr--,i===gt?n=Ot:(Tr=n,n=_t),n!==gt?(i=ht(),i!==gt?(Er=t,n=Ee(),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t}function g(){var t,n,i,r,s,a;return t=Tr,n=lt(),n!==gt?(60===e.charCodeAt(Tr)?(i=Bt,Tr++):(i=gt,0===Fr&&o(It)),i!==gt?(r=w(),r!==gt?(62===e.charCodeAt(Tr)?(s=kt,Tr++):(s=gt,0===Fr&&o(Tt)),s!==gt?(a=lt(),a!==gt?(Er=t,n=Je(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function y(){var t,n,i,r,s,a;return t=Tr,n=lt(),n!==gt?(60===e.charCodeAt(Tr)?(i=Bt,Tr++):(i=gt,0===Fr&&o(It)),i!==gt?(r=w(),r!==gt?(e.substr(Tr,2)===ye?(s=ye,Tr+=2):(s=gt,0===Fr&&o(we)),s!==gt?(a=lt(),a!==gt?(Er=t,n=Ve(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function w(){var t,e,n;return t=Tr,e=C(),e!==gt?(n=x(),n!==gt?(Er=t,e=je(e,n),t=e):(Tr=t,t=_t)):(Tr=t,t=_t),t}function x(){var t,e,n,i;if(t=Tr,e=lt(),e!==gt){for(n=[],i=A();i!==gt;)n.push(i),i=A();n!==gt?(i=lt(),i!==gt?(Er=t,e=Oe(n),t=e):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;return t}function _(){var t,n,i,r;return t=Tr,e.substr(Tr,2)===_e?(n=_e,Tr+=2):(n=gt,0===Fr&&o(Ce)),n!==gt?(i=C(),i!==gt?(62===e.charCodeAt(Tr)?(r=kt,Tr++):(r=gt,0===Fr&&o(Tt)),r!==gt?(Er=t,n=Ae(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function C(){var t,n,i,r;if(t=Tr,n=lt(),n!==gt){if(i=[],Fe.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=gt,0===Fr&&o(Pe)),r!==gt)for(;r!==gt;)i.push(r),Fe.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=gt,0===Fr&&o(Pe));else i=_t;i!==gt?(Er=t,n=ze(i),t=n):(Tr=t,t=_t)}else Tr=t,t=_t;return t}function A(){var t,n,i,r,s,a;return t=Tr,n=C(),n!==gt?(i=lt(),i!==gt?(61===e.charCodeAt(Tr)?(r=Le,Tr++):(r=gt,0===Fr&&o(Be)),r!==gt?(s=lt(),s!==gt?(a=N(),a!==gt?(Er=t,n=Ie(n,a),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=Tr,n=C(),n!==gt&&(Er=t,n=Me(n)),t=n),t}function N(){var t,n,i,r,s,a,u,c;if(t=Tr,34===e.charCodeAt(Tr)?(n=Re,Tr++):(n=gt,0===Fr&&o(qe)),n!==gt){if(i=[],r=J(),r===gt){if(r=Tr,s=[],a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(He.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(De)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t),a!==gt)for(;a!==gt;)s.push(a),a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(He.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(De)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);else s=_t;s!==gt&&(Er=r,s=Ue()),r=s}for(;r!==gt;)if(i.push(r),r=J(),r===gt){if(r=Tr,s=[],a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(He.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(De)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t),a!==gt)for(;a!==gt;)s.push(a),a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(He.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(De)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);else s=_t;s!==gt&&(Er=r,s=Ue()),r=s}i!==gt?(34===e.charCodeAt(Tr)?(r=Re,Tr++):(r=gt,0===Fr&&o(qe)),r!==gt?(Er=t,
n=$e(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;if(t===gt){if(t=Tr,39===e.charCodeAt(Tr)?(n=Ze,Tr++):(n=gt,0===Fr&&o(Qe)),n!==gt){if(i=[],r=J(),r===gt){if(r=Tr,s=[],a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(Ye.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(We)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t),a!==gt)for(;a!==gt;)s.push(a),a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(Ye.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(We)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);else s=_t;s!==gt&&(Er=r,s=Ue()),r=s}for(;r!==gt;)if(i.push(r),r=J(),r===gt){if(r=Tr,s=[],a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(Ye.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(We)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t),a!==gt)for(;a!==gt;)s.push(a),a=Tr,u=Tr,Fr++,e.substr(Tr,2)===ke?(c=ke,Tr+=2):(c=gt,0===Fr&&o(Te)),Fr--,c===gt?u=Ot:(Tr=u,u=_t),u!==gt?(Ye.test(e.charAt(Tr))?(c=e.charAt(Tr),Tr++):(c=gt,0===Fr&&o(We)),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);else s=_t;s!==gt&&(Er=r,s=Ue()),r=s}i!==gt?(39===e.charCodeAt(Tr)?(r=Ze,Tr++):(r=gt,0===Fr&&o(Qe)),r!==gt?(Er=t,n=$e(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;t===gt&&(t=Tr,n=J(),n!==gt&&(Er=t,n=Ge(n)),t=n)}return t}function S(){var t,n,i;return t=Tr,e.substr(Tr,3)===Ke?(n=Ke,Tr+=3):(n=gt,0===Fr&&o(Xe)),n!==gt?(i=k(),i!==gt?(Er=t,n=tn(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=E()),t}function k(){var t,e,n,i,r,s;return t=Tr,e=V(),e!==gt?(n=lt(),n!==gt?(i=c(),i!==gt?(r=lt(),r!==gt?(s=T(),s!==gt?(Er=t,e=en(e,i,s),t=e):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function T(){var t,n,i;return t=Tr,e.substr(Tr,3)===nn?(n=nn,Tr+=3):(n=gt,0===Fr&&o(rn)),n!==gt?(i=k(),i!==gt?(Er=t,n=sn(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=Tr,e.substr(Tr,5)===on?(n=on,Tr+=5):(n=gt,0===Fr&&o(an)),n!==gt?(i=lt(),i!==gt?(Er=t,n=un(),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)),t}function E(){var t,n,i,r,s,a;return t=Tr,e.substr(Tr,2)===ke?(n=ke,Tr+=2):(n=gt,0===Fr&&o(Te)),n!==gt?(i=lt(),i!==gt?(r=j(),r!==gt?(s=lt(),s!==gt?(e.substr(Tr,2)===cn?(a=cn,Tr+=2):(a=gt,0===Fr&&o(hn)),a!==gt?(Er=t,n=ln(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function J(){var t,n,i,r,s,a;return t=Tr,e.substr(Tr,2)===ke?(n=ke,Tr+=2):(n=gt,0===Fr&&o(Te)),n!==gt?(i=lt(),i!==gt?(r=j(),r!==gt?(s=lt(),s!==gt?(e.substr(Tr,2)===cn?(a=cn,Tr+=2):(a=gt,0===Fr&&o(hn)),a!==gt?(Er=t,n=pn(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function V(){var t,n,i,r,s;return t=Tr,n=lt(),n!==gt?(i=et(),i!==gt?(r=lt(),r!==gt?(e.substr(Tr,2)===cn?(s=cn,Tr+=2):(s=gt,0===Fr&&o(hn)),s!==gt?(Er=t,n=dn(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=Tr,n=j(),n!==gt?(i=lt(),i!==gt?(e.substr(Tr,2)===cn?(r=cn,Tr+=2):(r=gt,0===Fr&&o(hn)),r!==gt?(Er=t,n=pn(n),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)),t}function j(){var t,n,i,r,s,a,u,c;if(t=Tr,n=it(),n!==gt&&(Er=t,n=fn(n)),t=n,t===gt)if(t=Tr,n=lt(),n!==gt)if(i=O(),i!==gt)if(r=lt(),r!==gt){for(s=[],a=Tr,44===e.charCodeAt(Tr)?(u=vn,Tr++):(u=gt,0===Fr&&o(bn)),u!==gt?(c=rt(),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);a!==gt;)s.push(a),a=Tr,44===e.charCodeAt(Tr)?(u=vn,Tr++):(u=gt,0===Fr&&o(bn)),u!==gt?(c=rt(),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);s!==gt?(Er=t,n=mn(i,s),t=n):(Tr=t,t=_t)}else Tr=t,t=_t;else Tr=t,t=_t;else Tr=t,t=_t;return t}function O(){var t,n,i,r,s,a;return t=Tr,n=z(),n!==gt?(63===e.charCodeAt(Tr)?(i=gn,Tr++):(i=gt,0===Fr&&o(yn)),i!==gt?(r=O(),r!==gt?(58===e.charCodeAt(Tr)?(s=wn,Tr++):(s=gt,0===Fr&&o(xn)),s!==gt?(a=O(),a!==gt?(Er=t,n=_n(n,r,a),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=z()),t}function F(){var t,n,i,r;return t=Tr,40===e.charCodeAt(Tr)?(n=Cn,Tr++):(n=gt,0===Fr&&o(An)),n!==gt?(i=P(),i!==gt?(41===e.charCodeAt(Tr)?(r=Nn,Tr++):(r=gt,0===Fr&&o(Sn)),r!==gt?(Er=t,n=kn(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=Tr,e.substr(Tr,2)===Tn?(n=Tn,Tr+=2):(n=gt,0===Fr&&o(En)),n!==gt&&(Er=t,n=Jn()),t=n),t}function P(){var t,n,i,r,s,a;if(t=Tr,n=O(),n!==gt){for(i=[],r=Tr,44===e.charCodeAt(Tr)?(s=vn,Tr++):(s=gt,0===Fr&&o(bn)),s!==gt?(a=O(),a!==gt?(s=[s,a],r=s):(Tr=r,r=_t)):(Tr=r,r=_t);r!==gt;)i.push(r),r=Tr,44===e.charCodeAt(Tr)?(s=vn,Tr++):(s=gt,0===Fr&&o(bn)),s!==gt?(a=O(),a!==gt?(s=[s,a],r=s):(Tr=r,r=_t)):(Tr=r,r=_t);i!==gt?(Er=t,n=Vn(n,i),t=n):(Tr=t,t=_t)}else Tr=t,t=_t;return t}function z(){var t,n,i,r;return t=Tr,n=R(),n!==gt?(61===e.charCodeAt(Tr)?(i=Le,Tr++):(i=gt,0===Fr&&o(Be)),i!==gt?(r=z(),r!==gt?(Er=t,n=jn(n,r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=L()),t}function L(){var t,n,i,r;return t=Tr,n=B(),n!==gt?(e.substr(Tr,2)===On?(i=On,Tr+=2):(i=gt,0===Fr&&o(Fn)),i===gt&&(e.substr(Tr,2)===Pn?(i=Pn,Tr+=2):(i=gt,0===Fr&&o(zn)),i===gt&&(e.substr(Tr,3)===Ln?(i=Ln,Tr+=3):(i=gt,0===Fr&&o(Bn)),i===gt&&(e.substr(Tr,2)===In?(i=In,Tr+=2):(i=gt,0===Fr&&o(Mn)),i===gt&&(e.substr(Tr,3)===Rn?(i=Rn,Tr+=3):(i=gt,0===Fr&&o(qn)),i===gt&&(e.substr(Tr,2)===Hn?(i=Hn,Tr+=2):(i=gt,0===Fr&&o(Dn)),i===gt&&(e.substr(Tr,3)===Un?(i=Un,Tr+=3):(i=gt,0===Fr&&o($n)),i===gt&&(e.substr(Tr,2)===Zn?(i=Zn,Tr+=2):(i=gt,0===Fr&&o(Qn)),i===gt&&(62===e.charCodeAt(Tr)?(i=kt,Tr++):(i=gt,0===Fr&&o(Tt)),i===gt&&(e.substr(Tr,3)===Yn?(i=Yn,Tr+=3):(i=gt,0===Fr&&o(Wn)),i===gt&&(e.substr(Tr,2)===Gn?(i=Gn,Tr+=2):(i=gt,0===Fr&&o(Kn)),i===gt&&(60===e.charCodeAt(Tr)?(i=Bt,Tr++):(i=gt,0===Fr&&o(It)),i===gt&&(43===e.charCodeAt(Tr)?(i=Xn,Tr++):(i=gt,0===Fr&&o(ti)),i===gt&&(45===e.charCodeAt(Tr)?(i=ei,Tr++):(i=gt,0===Fr&&o(ni)),i===gt&&(37===e.charCodeAt(Tr)?(i=ii,Tr++):(i=gt,0===Fr&&o(ri)),i===gt&&(42===e.charCodeAt(Tr)?(i=si,Tr++):(i=gt,0===Fr&&o(oi)),i===gt&&(47===e.charCodeAt(Tr)?(i=ai,Tr++):(i=gt,0===Fr&&o(ui)))))))))))))))))),i!==gt?(r=L(),r!==gt?(Er=t,n=ci(n,i,r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=B()),t}function B(){var t,e,n,i;return t=Tr,e=lt(),e!==gt?(n=I(),n!==gt?(i=lt(),i!==gt?(Er=t,e=hi(n),t=e):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function I(){var t,e,n,i;if(t=Tr,e=q(),e!==gt){for(n=[],i=M();i!==gt;)n.push(i),i=M();n!==gt?(Er=t,e=li(e,n),t=e):(Tr=t,t=_t)}else Tr=t,t=_t;return t===gt&&(t=X(),t===gt&&(t=R())),t}function M(){var t,n,i,r,s,a;return t=Tr,124===e.charCodeAt(Tr)?(n=pi,Tr++):(n=gt,0===Fr&&o(di)),n!==gt?(i=lt(),i!==gt?(r=et(),r!==gt?(s=F(),s===gt&&(s=ge),s!==gt?(a=lt(),a!==gt?(Er=t,n=fi(r,s),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function R(){var t,e,n,i;return t=Tr,e=lt(),e!==gt?(n=H(),n!==gt?(i=lt(),i!==gt?(Er=t,e=vi(n),t=e):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function q(){var t,n,i;return t=Tr,33===e.charCodeAt(Tr)?(n=bi,Tr++):(n=gt,0===Fr&&o(mi)),n===gt&&(45===e.charCodeAt(Tr)?(n=ei,Tr++):(n=gt,0===Fr&&o(ni))),n!==gt?(i=q(),i!==gt?(Er=t,n=gi(n,i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(t=Z(),t===gt&&(t=X(),t===gt&&(t=R()))),t}function H(){var t;return t=$(),t===gt&&(t=nt(),t===gt&&(t=D(),t===gt&&(t=at(),t===gt&&(t=tt())))),t}function D(){var t,n,i,r,s,a;if(t=Tr,n=Tr,45===e.charCodeAt(Tr)?(i=ei,Tr++):(i=gt,0===Fr&&o(ni)),i===gt&&(i=ge),i!==gt){if(r=Tr,s=[],yi.test(e.charAt(Tr))?(a=e.charAt(Tr),Tr++):(a=gt,0===Fr&&o(wi)),a!==gt)for(;a!==gt;)s.push(a),yi.test(e.charAt(Tr))?(a=e.charAt(Tr),Tr++):(a=gt,0===Fr&&o(wi));else s=_t;s!==gt?(a=U(),a===gt&&(a=ge),a!==gt?(s=[s,a],r=s):(Tr=r,r=_t)):(Tr=r,r=_t),r===gt&&(r=U()),r!==gt?(i=[i,r],n=i):(Tr=n,n=_t)}else Tr=n,n=_t;return n!==gt&&(Er=t,n=xi(n)),t=n}function U(){var t,n,i,r;if(t=Tr,46===e.charCodeAt(Tr)?(n=_i,Tr++):(n=gt,0===Fr&&o(Ci)),n!==gt){if(i=[],yi.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=gt,0===Fr&&o(wi)),r!==gt)for(;r!==gt;)i.push(r),yi.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=gt,0===Fr&&o(wi));else i=_t;i!==gt?(n=[n,i],t=n):(Tr=t,t=_t)}else Tr=t,t=_t;return t}function $(){var t,n,i,r;return t=Tr,40===e.charCodeAt(Tr)?(n=Cn,Tr++):(n=gt,0===Fr&&o(An)),n!==gt?(i=O(),i!==gt?(41===e.charCodeAt(Tr)?(r=Nn,Tr++):(r=gt,0===Fr&&o(Sn)),r!==gt?(Er=t,n=Ai(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function Z(){var t,e;return t=Tr,e=Q(),e===gt&&(e=Y(),e===gt&&(e=K(),e===gt&&(e=W(),e===gt&&(e=G())))),e!==gt&&(Er=t,e=Ni(e)),t=e}function Q(){var t,n;return t=Tr,e.substr(Tr,4)===Si?(n=Si,Tr+=4):(n=gt,0===Fr&&o(ki)),n===gt&&(e.substr(Tr,5)===Ti?(n=Ti,Tr+=5):(n=gt,0===Fr&&o(Ei))),n!==gt&&(Er=t,n=Ji(n)),t=n}function Y(){var t,n;return t=Tr,e.substr(Tr,9)===Vi?(n=Vi,Tr+=9):(n=gt,0===Fr&&o(ji)),n!==gt&&(Er=t,n=Oi()),t=n}function W(){var t,n;return t=Tr,e.substr(Tr,3)===Fi?(n=Fi,Tr+=3):(n=gt,0===Fr&&o(Pi)),n!==gt&&(Er=t,n=zi()),t=n}function G(){var t,n;return t=Tr,e.substr(Tr,8)===Li?(n=Li,Tr+=8):(n=gt,0===Fr&&o(Bi)),n!==gt&&(Er=t,n=Ii()),t=n}function K(){var t,n;return t=Tr,e.substr(Tr,4)===Mi?(n=Mi,Tr+=4):(n=gt,0===Fr&&o(Ri)),n===gt&&(e.substr(Tr,4)===qi?(n=qi,Tr+=4):(n=gt,0===Fr&&o(Hi))),n!==gt&&(Er=t,n=Di()),t=n}function X(){var t,e,n;return t=Tr,e=R(),e!==gt?(n=F(),n!==gt?(Er=t,e=Ui(e,n),t=e):(Tr=t,t=_t)):(Tr=t,t=_t),t}function tt(){var t,n,i,r,s,a,u,c;if(t=Tr,94===e.charCodeAt(Tr)?(n=$i,Tr++):(n=gt,0===Fr&&o(Zi)),n===gt&&(e.substr(Tr,2)===Qi?(n=Qi,Tr+=2):(n=gt,0===Fr&&o(Yi)),n===gt&&(e.substr(Tr,3)===Wi?(n=Wi,Tr+=3):(n=gt,0===Fr&&o(Gi)),n===gt&&(126===e.charCodeAt(Tr)?(n=Ki,Tr++):(n=gt,0===Fr&&o(Xi)),n===gt&&(e.substr(Tr,2)===tr?(n=tr,Tr+=2):(n=gt,0===Fr&&o(er)))))),n===gt&&(n=ge),n!==gt)if(i=lt(),i!==gt)if(r=et(),r!==gt){for(s=[],a=Tr,46===e.charCodeAt(Tr)?(u=_i,Tr++):(u=gt,0===Fr&&o(Ci)),u!==gt?(c=et(),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);a!==gt;)s.push(a),a=Tr,46===e.charCodeAt(Tr)?(u=_i,Tr++):(u=gt,0===Fr&&o(Ci)),u!==gt?(c=et(),c!==gt?(u=[u,c],a=u):(Tr=a,a=_t)):(Tr=a,a=_t);s!==gt?(a=lt(),a!==gt?(Er=t,n=nr(n,r,s),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;else Tr=t,t=_t;else Tr=t,t=_t;return t}function et(){var t,n,i;if(t=Tr,n=[],ir.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=gt,0===Fr&&o(rr)),i!==gt)for(;i!==gt;)n.push(i),ir.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=gt,0===Fr&&o(rr));else n=_t;return n!==gt&&(Er=t,n=sr(n)),t=n}function nt(){var t,n,i,r,s,a;return t=Tr,123===e.charCodeAt(Tr)?(n=or,Tr++):(n=gt,0===Fr&&o(ar)),n!==gt?(i=lt(),i!==gt?(r=it(),r===gt&&(r=ge),r!==gt?(s=lt(),s!==gt?(125===e.charCodeAt(Tr)?(a=ur,Tr++):(a=gt,0===Fr&&o(cr)),a!==gt?(Er=t,n=hr(r),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function it(){var t,e;return t=Tr,e=rt(),e!==gt&&(Er=t,e=lr(e)),t=e}function rt(){var t,n,i,r,s,a;if(t=Tr,n=st(),n!==gt){for(i=[],r=Tr,44===e.charCodeAt(Tr)?(s=vn,Tr++):(s=gt,0===Fr&&o(bn)),s!==gt?(a=rt(),a!==gt?(s=[s,a],r=s):(Tr=r,r=_t)):(Tr=r,r=_t);r!==gt;)i.push(r),r=Tr,44===e.charCodeAt(Tr)?(s=vn,Tr++):(s=gt,0===Fr&&o(bn)),s!==gt?(a=rt(),a!==gt?(s=[s,a],r=s):(Tr=r,r=_t)):(Tr=r,r=_t);i!==gt?(Er=t,n=pr(n,i),t=n):(Tr=t,t=_t)}else Tr=t,t=_t;return t}function st(){var t,n,i,r,s,a;return t=Tr,n=lt(),n!==gt?(i=ot(),i!==gt?(r=lt(),r!==gt?(58===e.charCodeAt(Tr)?(s=wn,Tr++):(s=gt,0===Fr&&o(xn)),s!==gt?(a=O(),a===gt&&(a=ge),a!==gt?(Er=t,n=dr(i,a),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t)):(Tr=t,t=_t),t}function ot(){var t,e;return t=Tr,e=at(),e!==gt&&(Er=t,e=fr(e)),t=e,t===gt&&(t=Tr,e=et(),e!==gt&&(Er=t,e=vr(e)),t=e),t}function at(){var t,n,i,r;if(Fr++,t=Tr,34===e.charCodeAt(Tr)?(n=Re,Tr++):(n=gt,0===Fr&&o(qe)),n!==gt){for(i=[],r=ut();r!==gt;)i.push(r),r=ut();i!==gt?(34===e.charCodeAt(Tr)?(r=Re,Tr++):(r=gt,0===Fr&&o(qe)),r!==gt?(Er=t,n=mr(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;if(t===gt)if(t=Tr,39===e.charCodeAt(Tr)?(n=Ze,Tr++):(n=gt,0===Fr&&o(Qe)),n!==gt){for(i=[],r=ct();r!==gt;)i.push(r),r=ct();i!==gt?(39===e.charCodeAt(Tr)?(r=Ze,Tr++):(r=gt,0===Fr&&o(Qe)),r!==gt?(Er=t,n=mr(i),t=n):(Tr=t,t=_t)):(Tr=t,t=_t)}else Tr=t,t=_t;return Fr--,t===gt&&(n=gt,0===Fr&&o(br)),t}function ut(){var t,n,i;return t=Tr,n=Tr,Fr++,34===e.charCodeAt(Tr)?(i=Re,Tr++):(i=gt,0===Fr&&o(qe)),i===gt&&(92===e.charCodeAt(Tr)?(i=gr,Tr++):(i=gt,0===Fr&&o(yr))),Fr--,i===gt?n=Ot:(Tr=n,n=_t),n!==gt?(i=ht(),i!==gt?(Er=t,n=wr(),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(e.substr(Tr,2)===xr?(t=xr,Tr+=2):(t=gt,0===Fr&&o(_r))),t}function ct(){var t,n,i;return t=Tr,n=Tr,Fr++,39===e.charCodeAt(Tr)?(i=Ze,Tr++):(i=gt,0===Fr&&o(Qe)),i===gt&&(92===e.charCodeAt(Tr)?(i=gr,Tr++):(i=gt,0===Fr&&o(yr))),Fr--,i===gt?n=Ot:(Tr=n,n=_t),n!==gt?(i=ht(),i!==gt?(Er=t,n=wr(),t=n):(Tr=t,t=_t)):(Tr=t,t=_t),t===gt&&(e.substr(Tr,2)===Cr?(t=Cr,Tr+=2):(t=gt,0===Fr&&o(Ar))),t}function ht(){var t;return e.length>Tr?(t=e.charAt(Tr),Tr++):(t=gt,0===Fr&&o(Nr)),t}function lt(){var t,n;for(t=[],Sr.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=gt,0===Fr&&o(kr));n!==gt;)t.push(n),Sr.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=gt,0===Fr&&o(kr));return t}function pt(t){return t.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function dt(t){return t.replace(/[ \r\n\t]+/g," ")}function ft(t){return t=t.filter(function(t){return!/^[\n\t\r]+$/.test(t.value)}),1===t.length&&"string"===t[0].type?t[0]:new Kr(new Xr(t))}function vt(t){function e(t){for(var e,n=t.length;n--&&(e=t[n],"textNode"==e.type&&!/\S/.test(e.value)&&!e.decoded);)t.splice(n,1);return t}return e(e(t.reverse()).reverse())}var bt,mt=arguments.length>1?arguments[1]:{},gt={},yt={Start:u},wt=u,xt=function(t){return new Pr(t)},_t=gt,Ct="<!DOCTYPE",At={type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},Nt=/^[^>]/,St={type:"class",value:"[^>]",description:"[^>]"},kt=">",Tt={type:"literal",value:">",description:'">"'},Et=function(t){return new Mr(t.join(""))},Jt=function(t){return new Kr(new Xr(vt(t)))},Vt="<!--",jt={type:"literal",value:"<!--",description:'"<!--"'},Ot=void 0,Ft="-->",Pt={type:"literal",value:"-->",description:'"-->"'},zt=function(t){return t},Lt=function(t){return new Lr(pt(t.join("")))},Bt="<",It={type:"literal",value:"<",description:'"<"'},Mt="area",Rt={type:"literal",value:"area",description:'"area"'},qt="base",Ht={type:"literal",value:"base",description:'"base"'},Dt="br",Ut={type:"literal",value:"br",description:'"br"'},$t="col",Zt={type:"literal",value:"col",description:'"col"'},Qt="command",Yt={type:"literal",value:"command",description:'"command"'},Wt="embed",Gt={type:"literal",value:"embed",description:'"embed"'},Kt="hr",Xt={type:"literal",value:"hr",description:'"hr"'},te="img",ee={type:"literal",value:"img",description:'"img"'},ne="input",ie={type:"literal",value:"input",description:'"input"'},re="keygen",se={type:"literal",value:"keygen",description:'"keygen"'},oe="link",ae={type:"literal",value:"link",description:'"link"'},ue="meta",ce={type:"literal",value:"meta",description:'"meta"'},he="param",le={type:"literal",value:"param",description:'"param"'},pe="source",de={type:"literal",value:"source",description:'"source"'},fe="track",ve={type:"literal",value:"track",description:'"track"'},be="wbr",me={type:"literal",value:"wbr",description:'"wbr"'},ge=null,ye="/>",we={type:"literal",value:"/>",description:'"/>"'},xe=function(t,e,n){return n&&t!=n.name&&r("</"+t+">"),new Br(t,e)},_e="</",Ce={type:"literal",value:"</",description:'"</"'},Ae=function(t){return{name:t}},Ne=function(t,e,n){return t.name!=n.name&&r("</"+t.name+">"),new Br(t.name,t.attributes,e)},Se=function(t){return new zr(dt(t.join("")))},ke="{{",Te={type:"literal",value:"{{",description:'"{{"'},Ee=function(){return i()},Je=function(t){return t},Ve=function(t){return new Br(t.name,t.attributes)},je=function(t,e){return{name:t,attributes:e}},Oe=function(t){for(var e={},n=0,i=t.length;i>n;n++){var r=t[n];e[r.name]=r.value}return new Qr(e)},Fe=/^[a-zA-Z0-9:_.\-]/,Pe={type:"class",value:"[a-zA-Z0-9:_.\\-]",description:"[a-zA-Z0-9:_.\\-]"},ze=function(t){return t.join("")},Le="=",Be={type:"literal",value:"=",description:'"="'},Ie=function(t,e){return{name:t,value:e}},Me=function(t){return{name:t,value:new Ur(!0)}},Re='"',qe={type:"literal",value:'"',description:'"\\""'},He=/^[^"]/,De={type:"class",value:'[^"]',description:'[^"]'},Ue=function(){return new $r(dt(i()))},$e=function(t){return ft(t)},Ze="'",Qe={type:"literal",value:"'",description:'"\'"'},Ye=/^[^']/,We={type:"class",value:"[^']",description:"[^']"},Ge=function(t){return ft([t])},Ke="{{#",Xe={type:"literal",value:"{{#",description:'"{{#"'},tn=function(t){return t},en=function(t,e,n){return new Ir(t,e,n)},nn="{{/",rn={type:"literal",value:"{{/",description:'"{{/"'},sn=function(t){return new Pr(t)},on="{{/}}",an={type:"literal",value:"{{/}}",description:'"{{/}}"'},un=function(){return void 0},cn="}}",hn={type:"literal",value:"}}",description:'"}}"'},ln=function(t){return new Ir(t)},pn=function(t){return t},dn=function(t){var e={};return e[t]=new Yr(new Ur(!0)),new Qr(e)},fn=function(t){for(var e in t)t[e]=new Yr(t[e]);return new Qr(t)},vn=",",bn={type:"literal",value:",",description:'","'},mn=function(t,e){var n={value:new Yr(t)};e=e.length?e[0][1]:[];for(var i=0,r=e.length;r>i;i++)n[e[i].key]=new Yr(e[i].value);return new Qr(n)},gn="?",yn={type:"literal",value:"?",description:'"?"'},wn=":",xn={type:"literal",value:":",description:'":"'},_n=function(t,e,n){return new Rr(t,e,n)},Cn="(",An={type:"literal",value:"(",description:'"("'},Nn=")",Sn={type:"literal",value:")",description:'")"'},kn=function(t){return t},Tn="()",En={type:"literal",value:"()",description:'"()"'},Jn=function(){return[]},Vn=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},jn=function(t,e){return new qr(t,e)},On="&&",Fn={type:"literal",value:"&&",description:'"&&"'},Pn="||",zn={type:"literal",value:"||",description:'"||"'},Ln="===",Bn={type:"literal",value:"===",description:'"==="'},In="==",Mn={type:"literal",value:"==",description:'"=="'},Rn="!==",qn={type:"literal",value:"!==",description:'"!=="'},Hn="!=",Dn={type:"literal",value:"!=",description:'"!="'},Un=">==",$n={type:"literal",value:">==",description:'">=="'},Zn=">=",Qn={type:"literal",value:">=",description:'">="'},Yn="<==",Wn={type:"literal",value:"<==",description:'"<=="'},Gn="<=",Kn={type:"literal",value:"<=",description:'"<="'},Xn="+",ti={type:"literal",value:"+",description:'"+"'},ei="-",ni={type:"literal",value:"-",description:'"-"'},ii="%",ri={type:"literal",value:"%",description:'"%"'},si="*",oi={type:"literal",value:"*",description:'"*"'},ai="/",ui={type:"literal",value:"/",description:'"/"'},ci=function(t,e,n){return new Hr(e,t,n)},hi=function(t){return t},li=function(t,e){for(var n=0,i=e.length;i>n;n++)t=new Gr(e[n].name,new Xr([t].concat(e[n].parameters)));return t},pi="|",di={type:"literal",value:"|",description:'"|"'},fi=function(t,e){return{name:t,parameters:e||[]}},vi=function(t){return t},bi="!",mi={type:"literal",value:"!",description:'"!"'},gi=function(t,e){return new Dr(t,e)},yi=/^[0-9]/,wi={type:"class",value:"[0-9]",description:"[0-9]"},xi=function(t){return new Ur(parseFloat(i()))},_i=".",Ci={type:"literal",value:".",description:'"."'},Ai=function(t){return new ts(t)},Ni=function(t){return new Ur(t.value)},Si="true",ki={type:"literal",value:"true",description:'"true"'},Ti="false",Ei={type:"literal",value:"false",description:'"false"'},Ji=function(t){return{type:"boolean",value:"true"===t}},Vi="undefined",ji={type:"literal",value:"undefined",description:'"undefined"'},Oi=function(){return{type:"undefined",value:void 0}},Fi="NaN",Pi={type:"literal",value:"NaN",description:'"NaN"'},zi=function(){return{type:"nan",value:0/0}},Li="Infinity",Bi={type:"literal",value:"Infinity",description:'"Infinity"'},Ii=function(){return{type:"infinity",value:1/0}},Mi="null",Ri={type:"literal",value:"null",description:'"null"'},qi="NULL",Hi={type:"literal",value:"NULL",description:'"NULL"'},Di=function(){return{type:"null",value:null}},Ui=function(t,e){return new Wr(t,new Xr(e))},$i="^",Zi={type:"literal",value:"^",description:'"^"'},Qi="~>",Yi={type:"literal",value:"~>",description:'"~>"'},Wi="<~>",Gi={type:"literal",value:"<~>",description:'"<~>"'},Ki="~",Xi={type:"literal",value:"~",description:'"~"'},tr="<~",er={type:"literal",value:"<~",description:'"<~"'},nr=function(t,e,n){return n=[e].concat(n.map(function(t){return t[1]})),new Zr(n,t)},ir=/^[a-zA-Z_$0-9]/,rr={type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},sr=function(t){return i()},or="{",ar={type:"literal",value:"{",description:'"{"'},ur="}",cr={type:"literal",value:"}",description:'"}"'},hr=function(t){return new Qr(t)},lr=function(t){for(var e={},n=0,i=t.length;i>n;n++)e[t[n].key]=t[n].value;return e},pr=function(t,e){return[t].concat(e.length?e[0][1]:[])},dr=function(t,e){return{key:t,value:e||new Ur(void 0)}},fr=function(t){return t.value},vr=function(t){return t},br={type:"other",description:"string"},mr=function(t){return new $r(t.join(""))},gr="\\",yr={type:"literal",value:"\\",description:'"\\\\"'},wr=function(){return i()},xr='\\"',_r={type:"literal",value:'\\"',description:'"\\\\\\""'},Cr="\\'",Ar={type:"literal",value:"\\'",description:'"\\\\\'"'},Nr={type:"any",description:"any character"},Sr=/^[ \n\r\t]/,kr={type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"},Tr=0,Er=0,Jr=0,Vr={line:1,column:1,seenCR:!1},jr=0,Or=[],Fr=0;if("startRule"in mt){if(!(mt.startRule in yt))throw new Error("Can't start parsing from rule \""+mt.startRule+'".');wt=yt[mt.startRule]}var Pr=(t("./ast/doctype"),t("./ast/rootNode")),zr=t("./ast/textNode"),Lr=t("./ast/commentNode"),Br=t("./ast/elementNode"),Ir=t("./ast/blockBinding"),Mr=t("./ast/doctype"),Rr=t("./ast/ternaryCondition"),qr=t("./ast/assignment"),Hr=t("./ast/operator"),Dr=t("./ast/not"),Ur=t("./ast/literal"),$r=t("./ast/string"),Zr=t("./ast/reference"),Qr=t("./ast/hash"),Yr=t("./ast/script"),Wr=t("./ast/call"),Gr=t("./ast/modifier"),Kr=t("./ast/array"),Xr=t("./ast/parameters"),ts=t("./ast/group");if(bt=wt(),bt!==gt&&Tr===e.length)return bt;throw bt!==gt&&Tr<e.length&&o({type:"end",description:"end of input"}),a(null,Or,jr)}return e(n,Error),{SyntaxError:n,parse:i}}()},{"./ast/array":25,"./ast/assignment":26,"./ast/blockBinding":28,"./ast/call":29,"./ast/commentNode":30,"./ast/doctype":31,"./ast/elementNode":32,"./ast/group":33,"./ast/hash":34,"./ast/literal":35,"./ast/modifier":36,"./ast/not":37,"./ast/operator":38,"./ast/parameters":39,"./ast/reference":40,"./ast/rootNode":41,"./ast/script":42,"./ast/string":43,"./ast/ternaryCondition":44,"./ast/textNode":45}],48:[function(t,e,n){(function(n,i){function r(t){this._animationQueue=[],this.tick=t.tick||a,this._id=t._id||2}var s=t("protoclass"),o=(i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||n.nextTick).bind(i);if(n.browser)var a=function(t){o(t)};else var a=function(t){t()};s(r,{child:function(){return this.__child||(this.__child=new r({tick:this.tick,_id:this._id<<2}))},deferOnce:function(t){if(t.__running||(t.__running=1),t.__running&this._id)return void(this._running&&this.child().deferOnce(t));if(t.__running|=this._id,this._animationQueue.push(t),!this._requestingFrame){this._requestingFrame=!0;var e=this;this.tick(function(){e.runNow(),e._requestingFrame=!1})}},runNow:function(){var t=this._animationQueue;this._animationQueue=[],this._running=!0;for(var e=0;e<t.length;e++){var n=t[e];n.update(),n.__running&=~this._id,this._animationQueue.length&&this.runNow()}this._running=!1}}),e.exports=r}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:76,protoclass:81}],49:[function(t,e,n){function i(t){var e=t.run,n=t.refs;return{refs:n,evaluate:function(t){return e.call(t)},watch:function(t,i){function r(){if(a)return this;a=!0;var n=s;return i(s=e.call(t),n),a=!1,this}var s,o,a=!1;if(!n.length)return{dispose:function(){},trigger:r};if(1===n.length)o=t.watch(n[0],r).dispose;else{for(var u=[],c=n.length;c--;)u.push(t.watch(n[c],r));o=function(){for(var t=u.length;t--;)u[t].dispose()}}return{dispose:o,trigger:function(){return r(),this}}}}}function r(t,e){function n(e){return t.map(function(t){return"string"==typeof t?t:t.run.call(e)}).join("")}var i=t.filter(function(t){return"string"!=typeof t}).map(function(t){return t});return{buffered:!0,evaluate:function(t){return n(t)},watch:function(t,e){function r(){return e(n(t)),this}for(var s=[],o=i.length;o--;){var a=i[o];if(a.refs)for(var u=a.refs.length;u--;){var c=a.refs[u];s.push(t.watch(c,r))}}return{trigger:r,dispose:function(){for(var t=s.length;t--;)s[t].dispose()}}}}}function s(t,e){return{watch:function(e,n){return{trigger:function(){return n(t),this},dispose:function(){}}}}}e.exports=function(t){return"object"!=typeof t?s(t):t.length?1===t.length?i(t[0].value):r(t.map(function(t){return"object"==typeof t?t.value:t})):i(t)}},{}],50:[function(t,e,n){function i(t,e,n){s.call(this,t,e,n)}function r(t,e,n){this.document=t,this.startPath=e,this.endPath=n}var s=t("document-section").Section,o=t("protoclass"),a=t("../utils");s.extend(i,{rootNode:function(){return this.start.parentNode},createMarker:function(){return new r(this.document,a.getNodePath(this.start),a.getNodePath(this.end))},clone:function(){var t=s.prototype.clone.call(this);return new i(this.document,t.start,t.end)}}),o(r,{getSection:function(t){var e=a.getNodeByPath(t,this.startPath),n=a.getNodeByPath(t,this.endPath);return new i(this.document,e,n)}}),e.exports=i},{"../utils":72,"document-section":77,protoclass:81}],51:[function(t,e,n){function i(t,e,n){this.node=e,this.document=t}function r(t,e){this.nodePath=e,this.document=t}var s=(t("document-section").Section,t("protoclass")),o=t("../utils");s(i,{rootNode:function(){return this.node},createMarker:function(){return new r(this.document,o.getNodePath(this.node))},appendChild:function(t){this.node.appendChild(t)},removeAll:function(){this.node.innerHTML=""},render:function(){return this.node},remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},clone:function(){return new i(this.document,this.node.cloneNode(!0))}}),s(r,{getSection:function(t){var e=o.getNodeByPath(t,this.nodePath);return new i(this.document,e)}}),e.exports=i},{"../utils":72,"document-section":77,protoclass:81}],52:[function(t,e,n){function i(t){r.call(this,t)}{var r=t("../components/base");t("../utils/bind"),t("../utils/extend")}e.exports=r.extend(i,{bind:function(){this._bindings=[],this.childContext=new this.contextClass(this.attributes),this.childView?(this.childView.setOptions({parent:this.view}),this.childView.bind(this.childContext)):(this.childView=this.template.view(this.childContext,{parent:this.view}),this.section.appendChild(this.childView.render())),r.prototype.bind.call(this)},unbind:function(){this.childView&&this.childView.unbind()}})},{"../components/base":18,"../utils/bind":70,"../utils/extend":71}],53:[function(t,e,n){(function(n){function i(t,e){this.options=e,this.accessor=e.accessor,this.useCloneNode=void 0!=e.useCloneNode?!!e.useCloneNode:!m,this.accessorClass=e.accessorClass||v.accessorClass,this.components=e.components||v.components,this.modifiers=e.modifiers||v.modifiers,this.attributes=e.attributes||v.attributes,this.runloop=e.runloop||v.runloop,this.document=e.document||s,this.vnode="function"==typeof t?t(u.create,o.create,a.create,c.create,h.create,void 0,this.modifiers):t,this._viewPool=[],this.initialize()}var r=t("protoclass"),s=t("nofactor"),o=t("./vnode/block"),a=t("./vnode/element"),u=t("./vnode/fragment"),c=t("./vnode/text"),h=t("./vnode/comment"),l=t("./view"),p=t("../section/fragment"),d=t("../section/node"),f=t("./component"),v=t("../defaults"),b=t("../utils/extend"),m=!1;if(n.browser){var g=~navigator.userAgent.toLowerCase().indexOf("msie"),y=~navigator.userAgent.toLowerCase().indexOf("trident");m=!(!g&&!y)}e.exports=r(i,{initialize:function(){this.hydrators=[],this.section=new p(this.document);var t=this.vnode.initialize(this);11===t.nodeType?(this.section=new p(this.document),this.section.appendChild(t)):this.section=new d(this.document,t);for(var e=this.hydrators.length;e--;)this.hydrators[e].initialize()},createComponentClass:function(t){return f.extend({template:this,contextClass:t||Object})},child:function(t,e){return new i(t,b(e,{},this.options))},view:function(t,e){var n;this.useCloneNode?n=this.section.clone():(this.initialize(),n=this.section);var i=this._viewPool.pop();return i?i.setOptions(e||{}):i=new l(this,this._viewPool,n,this.hydrators,e||{}),i.setOptions(e||{}),t&&i.bind(t),i}}),e.exports=function(t,n){var r,s=typeof t;if("string"===s){if(!e.exports.parser)throw new Error("paperclip parser does not exist");r=e.exports.parser.compile(t)}else{if("function"!==s)throw new Error("source must either be type 'string' or 'function'");r=t}return new i(r,n||v)}}).call(this,t("_process"))},{"../defaults":24,"../section/fragment":50,"../section/node":51,"../utils/extend":71,"./component":52,"./view":54,"./vnode/block":59,"./vnode/comment":61,"./vnode/element":65,"./vnode/fragment":67,"./vnode/text":68,_process:76,nofactor:80,protoclass:81}],54:[function(t,e,n){function i(t,e,n,i,r){this.template=t,this.section=n,this.bindings=[],this._pool=e,this.parent=r.parent,this.accessor=this.parent?this.parent.accessor:t.accessor||new t.accessorClass,this.rootNode=n.rootNode(),this.transitions=new s,this.runloop=t.runloop,this._watchers=[];for(var a=0,u=i.length;u>a;a++)i[a].hydrate(this);this._dispose=o(this._dispose,this)}var r=t("protoclass"),s=t("./transitions"),o=t("../../utils/bind"),a=t("../../utils/stringifyNode"),u=t("./reference");r(i,{setOptions:function(t){this.parent=t.parent,t.parent&&(this.accessor=this.parent.accessor)},get:function(t){var e=this.accessor.get(this.context,t);return null!=e?e:this.parent?this.parent.get(t):void 0},set:function(t,e){return this.accessor.set(this.context,t,e)},reference:function(t,e,n){return new u(this,t,e,n)},call:function(t,e){var n=this.accessor.get(this.context,t);return n?this.accessor.call(this.context,t,e):this.parent?this.parent.call(t,e):void 0},setProperties:function(t){for(var e in t)this.set(e,t[e])},watch:function(t,e){return this.accessor.watchProperty(this.context,t,e)},watchEvent:function(t,e,n){return this.accessor.watchEvent(t,e,n)},bind:function(t){this.context&&this.unbind(),t||(t={}),this.context=this.accessor.castObject(t);for(var e=0,n=this.bindings.length;n>e;e++)this.bindings[e].bind()},unbind:function(){for(var t=this.bindings.length;t--;)this.bindings[t].unbind()},render:function(){return this.context||this.bind({}),this.transitions.enter(),this.section.render()},remove:function(){return this.section.remove(),this},dispose:function(){return this.transitions.exit(this._dispose)?void 0:(this._dispose(),this)},_dispose:function(){this.unbind(),this.section.remove(),this._pool.push(this)},toString:function(){var t=this.render();return"dom"===this.template.document.name?a(t):t.toString()}}),e.exports=i},{"../../utils/bind":70,"../../utils/stringifyNode":74,"./reference":55,"./transitions":56,protoclass:81}],55:[function(t,e,n){function i(t,e,n,i){this.view=t,this.path=e,this.settable=n!==!1,this.gettable=i!==!1}var r=t("protoclass");r(i,{__isReference:!0,value:function(t){return arguments.length?void(this.settable&&this.view.set(this.path,t)):this.gettable?this.view.get(this.path):void 0},toString:function(){return this.view.get(this.path)}}),e.exports=i},{protoclass:81}],56:[function(t,e,n){(function(n){function i(){this._enter=[],this._exit=[]}var r=t("protoclass"),s=t("../../utils/async");e.exports=r(i,{push:function(t){t.enter&&this._enter.push(t),t.exit&&this._exit.push(t)},enter:function(){if(!this._enter.length)return!1;for(var t=0,e=this._enter.length;e>t;t++)this._enter[t].enter()},exit:function(t){if(!this._exit.length)return!1;var e=this;return n.nextTick(function(){s.each(e._exit,function(t,e){t.exit(e)},t)}),!0}})}).call(this,t("_process"))},{"../../utils/async":69,_process:76,protoclass:81}],57:[function(t,e,n){function i(t,e,n){this.view=n,this.document=n.template.document,this.script=e,this.node=t,this.didChange=s(this.didChange,this)}var r=t("protoclass"),s=(t("../../../utils"),t("../../../utils/bind"));e.exports=r(i,{bind:function(){var t=this;this.binding=this.script.watch(this.view,function(e,n){
e!==t.currentValue&&(t.currentValue=e,t.didChange())}),this.currentValue=this.script.evaluate(this.view),null!=this.currentValue&&this.update()},didChange:function(){this.view.runloop.deferOnce(this)},update:function(){var t=String(null==this.currentValue?"":this.currentValue);"dom"!==this.document.name?this.node.replaceText(t,!0):this.node.nodeValue=String(t)},unbind:function(){this.binding&&(this.binding.dispose(),this.binding=void 0)}})},{"../../../utils":72,"../../../utils/bind":70,protoclass:81}],58:[function(t,e,n){function i(t,e,n){this.node=t,this.script=e,this.bindingClass=n}{var r=t("protoclass"),s=t("../../../utils");t("./binding")}e.exports=r(i,{initialize:function(){this.nodePath=s.getNodePath(this.node)},hydrate:function(t){var e=s.getNodeByPath(t.rootNode,this.nodePath);t.bindings.push(new this.bindingClass(e,this.script,t))}})},{"../../../utils":72,"./binding":57,protoclass:81}],59:[function(t,e,n){function i(t){this.script=s(t)}var r=t("protoclass"),s=(t("../../../utils"),t("../../../script")),o=t("./hydrator"),a=t("./binding"),u=t("./unbound");e.exports=r(i,{initialize:function(t){var e=t.document.createTextNode(""),n=this.script.refs.length?a:u;return t.hydrators.push(new o(e,this.script,n)),e}}),e.exports.create=function(t){return new i(t)}},{"../../../script":49,"../../../utils":72,"./binding":57,"./hydrator":58,"./unbound":60,protoclass:81}],60:[function(t,e,n){function i(t,e,n){this.view=n,this.document=n.template.document,this.script=e,this.node=t}{var r=t("protoclass");t("../../../utils")}e.exports=r(i,{bind:function(){var t=this.script.evaluate(this.view);if(this.value!==t){this.value=t;var e=String(null==t?"":t);"dom"!==this.document.name?this.node.replaceText(e,!0):this.node.nodeValue=String(e)}},unbind:function(){}})},{"../../../utils":72,protoclass:81}],61:[function(t,e,n){function i(t){this.value=t}var r=t("protoclass");e.exports=r(i,{initialize:function(t){return t.document.createComment(this.value)}}),e.exports.create=function(t){return new i(t)}},{protoclass:81}],62:[function(t,e,n){function i(t,e,n,i){this.node=i,this.key=e,this.value=n,this.attrClass=t}{var r=t("protoclass"),s=t("../../../utils");t("./attributesBinding")}e.exports=r(i,{initialize:function(){this.nodePath=s.getNodePath(this.node)},hydrate:function(t){var e=new this.attrClass({node:s.getNodeByPath(t.rootNode,this.nodePath),view:t,key:this.key,value:this.value});t.bindings.push(e)}})},{"../../../utils":72,"./attributesBinding":63,protoclass:81}],63:[function(t,e,n){function i(t,e,n,i){this.attributes=t,this.rawAttributes=e,this.component=n,this.view=i}{var r=t("protoclass");t("../../../utils")}e.exports=r(i,{bind:function(){this.bindings=[];for(var t in this.rawAttributes){var e=this.rawAttributes[t];e.watch&&e.evaluate?this._bindAttr(t,e):this.attributes[t]=e}},_bindAttr:function(t,e){var n=this;this.bindings.push(e.watch(this.view,function(e,i){n.attributes[t]=e,n.view.runloop.deferOnce(n.component)})),n.attributes[t]=e.evaluate(this.view)},unbind:function(){if(this.bindings){for(var t=this.bindings.length;t--;)this.bindings[t].dispose();this.bindings=[]}}})},{"../../../utils":72,protoclass:81}],64:[function(t,e,n){function i(t,e,n,i,r){this.name=t,this.attributes=e,this.childTemplate=n,this.section=i,this.componentClass=r}var r=t("protoclass"),s=t("./attributesBinding"),o=t("../../../utils/extend");e.exports=r(i,{initialize:function(){this.sectionMarker=this.section.createMarker()},hydrate:function(t){this.childTemplate.accessor=t.accessor;var e=this.sectionMarker.getSection(t.rootNode),n=o({},this.attributes),i=new this.componentClass({name:this.name,section:e,attributes:n,view:t,childTemplate:this.childTemplate});t.bindings.push(new s(n,this.attributes,i,t)),i.bind&&t.bindings.push(i)}})},{"../../../utils/extend":71,"./attributesBinding":63,protoclass:81}],65:[function(t,e,n){function i(t){return t.replace(/\-./,function(t){return t.substr(1).toUpperCase()})}function r(t,e,n){this.name=i(t),this.attributes=e,this.children=n}var s=t("protoclass"),o=t("../../../section/fragment"),a=t("../../../section/node"),u=t("../fragment"),c=(t("../../../utils"),t("../../../script")),h=t("./componentHydrator"),l=t("./attributeHydrator"),p=t("./valueAttribute"),d=t("../../../utils/set");e.exports=s(r,{initialize:function(t){var e=t.components[this.name];if(e){var n=new o(t.document);return t.hydrators.push(new h(this.name,this.attributes,t.child(this.children),n,e)),n.render()}var r,s,u=t.document.createElement(this.name),c=!1,d={};for(var f in this.attributes){var v=i(f);s=this.attributes[f];var b=typeof s,m=t.components[v],g=t.attributes[v];c=!!m||c,m?(r||(r=new a(t.document,u)),t.hydrators.push(new h(this.name,"object"==typeof s?s:this.attributes,t.child(this.children),r,m))):!g||g.test&&!g.test(s)?"object"!==b?d[f]=s:t.hydrators.push(new l(p,f,s,u)):t.hydrators.push(new l(g,f,s,u))}for(f in d)s=d[f],"string"==typeof s&&u.setAttribute(f,d[f]);return c||u.appendChild(this.children.initialize(t)),u}}),e.exports.create=function(t,e,n){var i={};for(var s in e){var o=e[s];d(i,s.toLowerCase(),"object"==typeof o?c(o):o)}return new r(t,i,new u(n))}},{"../../../script":49,"../../../section/fragment":50,"../../../section/node":51,"../../../utils":72,"../../../utils/set":73,"../fragment":67,"./attributeHydrator":62,"./componentHydrator":64,"./valueAttribute":66,protoclass:81}],66:[function(t,e,n){var i=t("../../../attributes/script");e.exports=i.extend({update:function(){return null==this.currentValue?this.node.removeAttribute(this.key):void this.node.setAttribute(this.key,this.currentValue)}})},{"../../../attributes/script":15}],67:[function(t,e,n){function i(t){this.children=t}var r=t("protoclass");e.exports=r(i,{initialize:function(t){if(1===this.children.length)return this.children[0].initialize(t);var e=t.document.createDocumentFragment();return this.children.forEach(function(n){e.appendChild(n.initialize(t))}),e}}),e.exports.create=function(t){return new i(t)}},{protoclass:81}],68:[function(t,e,n){function i(t){this.value=t}var r=t("protoclass");e.exports=r(i,{initialize:function(t){return t.document.createTextNode(/^\s+$/.test(this.value)?"":this.value)}}),e.exports.create=function(t){return new i(t)}},{protoclass:81}],69:[function(t,e,n){e.exports={each:function(t,e,n){var i=t.length,r=0;t.forEach(function(t){var s=!1;e(t,function(){if(s)throw new Error("callback called twice");s=!0,++r===i&&n&&n()})})}}},{}],70:[function(t,e,n){e.exports=function(t,e){return t.bind?t.bind.apply(t,[e].concat(Array.prototype.slice.call(arguments,2))):function(){return t.apply(e,arguments)}}},{}],71:[function(t,e,n){e.exports=function(t){t||(t={});for(var e=Array.prototype.slice.call(arguments,1),n=0,i=e.length;i>n;n++){var r=e[n];for(var s in r)t[s]=r[s]}return t}},{}],72:[function(t,e,n){t("document-section");e.exports={getNodePath:function(t){for(var e=[],n=t.parentNode,i=t;n;)e.unshift(Array.prototype.slice.call(n.childNodes).indexOf(i)),i=n,n=n.parentNode;return e},getNodeByPath:function(t,e){for(var n=t,i=0,r=e.length;r>i;i++)n=n.childNodes[e[i]];return n}}},{"document-section":77}],73:[function(t,e,n){e.exports=function(t,e,n){for(var i,r="string"==typeof e?e.split("."):e,s=t,o=0,a=r.length-1;a>o;o++)i=r[o],s[i]||(s[i]={}),s=s[i];return s[r[r.length-1]]=n,n}},{}],74:[function(t,e,n){function i(t){var e="";if(11===t.nodeType){for(var n=0,r=t.childNodes.length;r>n;n++)e+=i(t.childNodes[n]);return e}return e=t.nodeValue||t.outerHTML||"",8===t.nodeType&&(e="<!--"+e+"-->"),e}e.exports=i},{}],75:[function(t,e,n){e.exports=function(t){for(var e={},n=t.concat(),i=n.length;i--;){var r=n[i];e[r]||(e[r]=0),++e[r]>1&&n.splice(i,1)}return n}},{}],76:[function(t,e,n){function i(){if(!a){a=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}a=!1}}function r(){}var s=e.exports={},o=[],a=!1;s.nextTick=function(t){o.push(t),a||setTimeout(i,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=r,s.addListener=r,s.once=r,s.off=r,s.removeListener=r,s.removeAllListeners=r,s.emit=r,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],77:[function(t,e,n){var i=t("protoclass"),r=t("nofactor"),s=function(t,e,n){if(this.nodeFactory=t=t||r,this.start=e||t.createTextNode(""),this.end=n||t.createTextNode(""),this.visible=!0,!this.start.parentNode){var i=t.createFragment();i.appendChild(this.start),i.appendChild(this.end)}};s=i(s,{__isLoafSection:!0,render:function(){return this.start.parentNode},clone:function(){var t;return 11===this.start.parentNode.nodeType?t=this.start.parentNode.cloneNode(!0):(t=this.nodeFactory.createFragment(),this.getChildNodes().forEach(function(e){t.appendChild(e.cloneNode(!0))})),new s(this.nodeFactory,t.childNodes[0],t.childNodes[t.childNodes.length-1])},remove:function(){return this.nodeFactory.createFragment(this.getChildNodes())},show:function(){return this._detached?(this.append.apply(this,this._detached.getInnerChildNodes()),this._detached=void 0,this.visible=!0,this):this},hide:function(){return this._detached=this.removeAll(),this.visible=!1,this},removeAll:function(){return this._section(this._removeAll())},_removeAll:function(){for(var t=this.start,e=this.end,n=t.nextSibling,i=[];n!=e;)n.parentNode.removeChild(n),i.push(n),n=this.start.nextSibling;return i},append:function(){var t=Array.prototype.slice.call(arguments);t.length&&(t=t.length>1?this.nodeFactory.createFragment(t):t[0],this.end.parentNode.insertBefore(t,this.end))},appendChild:function(){this.append.apply(this,arguments)},prepend:function(){var t=Array.prototype.slice.call(arguments);t.length&&(t=t.length>1?this.nodeFactory.createFragment(t):t[0],this.start.parentNode.insertBefore(t,this.start.nextSibling))},prependChild:function(){this.prepend.apply(this,arguments)},replaceChildNodes:function(){this.removeAll(),this.append.apply(this,arguments)},toString:function(){var t=this.getChildNodes().map(function(t){return t.outerHTML||(void 0!=t.nodeValue&&3==t.nodeType?t.nodeValue:String(t))});return t.join("")},dispose:function(){this._disposed||(this._disposed=!0,this.removeAll(),this.start.parentNode.removeChild(this.start),this.end.parentNode.removeChild(this.end))},getChildNodes:function(){for(var t=this.start,e=this.end.nextSibling,n=[];t!=e;)n.push(t),t=t.nextSibling;return n},getInnerChildNodes:function(){var t=this.getChildNodes();return t.shift(),t.pop(),t},_section:function(t){var e=new s(this.nodeFactory);return e.append.apply(e,t),e}}),e.exports=function(t,e,n){return new s(t,e,n)},e.exports.Section=s},{nofactor:79,protoclass:81}],78:[function(t,e,n){function i(){}var r=t("protoclass");r(i,{createElement:function(t){},createFragment:function(){},createComment:function(t){},createTextNode:function(t){},parseHtml:function(t){}}),e.exports=i},{protoclass:81}],79:[function(t,e,n){function i(){}var r=t("./base");r.extend(i,{name:"dom",createElement:function(t){return document.createElement(t)},createComment:function(t){return document.createComment(t)},createTextNode:function(t){return document.createTextNode(t)},createFragment:function(t){t||(t=[]);for(var e=document.createDocumentFragment(),n=[],i=0,r=t.length;r>i;i++)n.push(t[i]);for(var s=0,o=n.length;o>s;s++)e.appendChild(n[s]);return e}}),e.exports=new i},{"./base":78}],80:[function(t,e,n){e.exports=document},{}],81:[function(t,e,n){function i(t,e){for(var n=0,i=e.length;i>n;n++){var r=e[n];for(var s in r)t[s]=r[s]}return t}function r(t,e){function n(){this.constructor=e}var s=Array.prototype.slice.call(arguments,2);return"function"!=typeof e&&(e&&s.unshift(e),e=t,t=function(){}),i(e,t),n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e.parent=e.superclass=t,i(e.prototype,s),r.setup(e),e}r.setup=function(t){return t.extend||(t.extend=function(t){var e=Array.prototype.slice.call(arguments,0);return"function"!=typeof t&&e.unshift(t=function(){t.parent.apply(this,arguments)}),r.apply(this,[this].concat(e))},t.mixin=function(t){i(this.prototype,arguments)},t.create=function(){var e=Object.create(t.prototype);return t.apply(e,arguments),e}),t},e.exports=r},{}]},{},[1]);